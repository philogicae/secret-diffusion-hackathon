# secret-diffusion - Bucharest Hackathon 2023

## Pitch

Secret Diffusion is a Dapp which allows the user to share a secret in the form of an NFT. 

Each secret is associated to a prompt and an AI generated image.
The user who generates the secret mints it in the form of a soulbound (sb) token, which allows him to mint a fixed amount of NFT that hold the secret.
The secret-NFTs generated can then be shared to other users, as long as they remain unrevealed.

A secret-nft can be traded or transfered as long as the function reveal has not been opened.
Once the user opens the secret, the nft becomes not transferable.


## Secret generation

// TO DO 


Secret:
1. Simple: Msg + auto prompt v2.1 + extra
2. Prompt: No msg + custom prompt + extra (ex: custom model)
3. Complete: Msg + custom prompt + extra

Image & Encryption:
- Generate sbt keypair on back
- Create image and add image hash to secret
- Encrypt secret with sbt-pk
- Push image and secret on IPFS
- Mint SBT

Contract:
- 1 original SBT (owner) + n fixed mintable 1 time
- Metadata=
• Id: Serial number (at mint)
• Name: Secret nickname
• Desc: Type of secret (1/2/3)
• URL secret
• URL img (no metadata)
• metahash of metadata (at mint)-> indexed with sbt-pk
- NFTdata=
• Id: Serial number (sbt:0, nft from 1)
• State: sealed / revealed (0/1)
Combined ids (for URI) = see hash

Proof of ownership:
- Wallet signer (pk)-> in owners list-> open button if sealed

Open:
- If owner, commit tx.
- Event on page, get encrypted secret, decrypt with sbt-pk,
- encrypt with pa, send to front, reveal on sign-proof with pk.

Proof of knowledge:
- Check owners list-> [index, state]
if owner not -1 & state not 0: true

Verify authenticity:
- Metahash-> sbt-pk-> decrypt secret-> check image hashs

Front: single page with web3 auth
- Create SBT / Mint NFTs
- Transfer / Distribution
- Sell / Open secret
- View & Verify

Back: flask with web3js lib on html
- Prompt crafter
- Image selector
- 1 pk generated by SBT, linked to metahash
- Link SD API with any source url (field at the top)
